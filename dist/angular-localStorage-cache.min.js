var SpeedShifter;!function(a){!function(a){var b=function(){function a(){}return a.compare=function(a,b){return a&&(a.comparator&&a.comparator(a.value,b)||a.value===b)},a.getDepend=function(a,b){for(var c=0;c<b.length;c++)if(b[c][a])return b[c][a];return null},a.isDependentFailed=function(b,c,d){var e,f,g,h=angular.copy(c);for(f in b){if(g=a.getDepend(f,d),g&&!a.compare(g,b[f]))return!0;if(h&&h.length>0)for(e=0;e<h.length;e++)h[e]==f&&h.splice(e--,1)}if(h&&h.length>0)for(e=0;e<h.length;e++)if(g=a.getDepend(h[e],d),g&&!a.compare(g,b[h[e]]))return!0;return!1},a.isItemOutdated=function(a,b,c){return"undefined"==typeof c&&(c=(new Date).getTime()),a&&b&&(!b.expires||a.time&&a.time+b.expires>c)?!1:!0},a.isItemInvalid=function(b,c,d,e){return"undefined"==typeof e&&(e=(new Date).getTime()),!b||!c||!d||a.isItemOutdated(b,c,e)||c.dependent&&a.isDependentFailed(b.depends,c.dependent,d)?!0:!1},a.composeDeps=function(b,c){if(b&&b.length>0){var d,e,f={},g=0;for(d=0;d<b.length;d++)e=a.getDepend(b[d],c),e&&(f[b[d]]=e.value,g++);if(g>0)return f}return void 0},a}();a.LocalStorageHelpers=b,a.LocalStorageProvider=function(){var a=this,c=this,d=".",e="\\.",f=3e5;a.name="",a.defOptions={},this.$get=["$log","$window","$interval",function(c,g,h){var i="undefined"==typeof g.localStorage?void 0:g.localStorage,j=!("undefined"==typeof i||"undefined"==typeof JSON),k={get:function(a){if(!j)return null;var b=i.getItem(a);try{var c=JSON.parse(b);return"undefined"==typeof c&&(c=b),"true"===c?c=!0:"false"===c&&(c=!1),c}catch(d){return b}},set:function(a,b){if(!j)return null;try{i.setItem(a,JSON.stringify(b))}catch(d){throw c.error("localStorage LIMIT REACHED: ("+d+")"),d}return b},remove:function(a){return j?(i.removeItem(a),!0):!1}},l={cacheStack:{}},m={};return l.getCacheObject=function(a){return l.cacheStack[a]&&l.cacheStack[a].cache||null},l.registerCacheObject=function(a,b,c){return l.getCacheObject(a)?l.getCacheObject(a):(l.cacheStack[a]={cache:b,private_cache:c},l.cacheStack[a].cache)},l.unregisterCacheObject=function(a){delete l.cacheStack[a]},l.cleanStorage=function(){if(j){var a,b,c,d=l.cacheStack,e=0,f=(new Date).getTime();for(a=0;a<i.length;a++){b=i.key(a);for(c in d)try{if(d[c].private_cache.isInvalid(b,f)){k.remove(b),e++;break}}catch(g){}}return e}},l.cleanOnStorageOverflow=function(a){if(j){var b=l.cleanStorage();if(a&&a>b){var c,d,e,f=l.cacheStack,b=0;for(c=0;c<i.length;c++){d=i.key(c);for(e in f)try{if(f[e].private_cache.isCritical(d)){k.remove(d),b++;break}}catch(g){}if(a&&b>=a)break}}return b}},l.clearStorage=function(){if(j){var a,b,c,d=l.cacheStack,e=0;for(a=0;a<i.length;a++){b=i.key(a);for(c in d)try{if(d[c].private_cache.isBelongs(b)){k.remove(b),e++;break}}catch(f){}}return e}},l.setClearInterval=function(a){"undefined"==typeof a&&(a=f),h.cancel(l.clearInterval),l.clearInterval=h(l.cleanStorage,a)},l.setClearInterval(a.defOptions.cleanTimeout),setTimeout(l.cleanStorage,1e4),j||c.error("LocalStorage is not supported"),function(g,n){var o=a.name+d+g;if(l.getCacheObject(o))return c.log(g+" localStorage already exists."),l.getCacheObject(o);n=angular.extend({},a.defOptions,n);var p=new RegExp("^"+o+e,"gi"),q={},r={},s=[r,m],t={};return q.get=function(a){var c=o+d+a,e=k.get(c);return e?b.isItemInvalid(k.get(c),n,s)?(k.remove(c),null):e.data:null},q.set=function(a,e){var f=o+d+a,g={data:e,time:(new Date).getTime(),depends:b.composeDeps(n.dependent,s)};try{k.set(f,g)}catch(h){c.log("localStorage LIMIT REACHED: ("+h+")"),setTimeout(l.cleanOnStorageOverflow,0)}},q.remove=function(a){var b=o+d+a;k.remove(b)},q.clear=function(){if(j){var a,b;for(a=0;a<i.length;a++)b=i.key(a),t.isBelongs(b)&&k.remove(b)}},q.clearStorage=function(){l.clearStorage()},q.setDependence=function(a,b){b?(m[a.name]=a,l.cleanStorage()):(r[a.name]=a,t.cleanStorage())},q.setDependenceVal=function(a,b,c){c?(m[a]?m[a].value=b:m[a]={name:a,value:b},l.cleanStorage()):(r[a]?r[a].value=b:r[a]={name:a,value:b},t.cleanStorage())},t.cleanStorage=function(){if(j){console.error("cleanStorage",g);var a,b,c=0,d=(new Date).getTime();for(a=0;a<i.length;a++)b=i.key(a),t.isInvalid(b,d)&&k.remove(b);return c}},t.isBelongs=function(a){return p.test(a)},t.isInvalid=function(a,c){return"undefined"==typeof c&&(c=(new Date).getTime()),t.isBelongs(a)?b.isItemInvalid(k.get(a),n,s,c):!1},t.isCritical=function(a){return t.isBelongs(a)&&n.critical},t.setClearInterval=function(b){"undefined"==typeof b&&(b=f),h.cancel(t.clearInterval),b!=a.defOptions.cleanTimeout&&(t.clearInterval=h(t.cleanStorage,b))},t.setClearInterval(n.cleanTimeout),l.registerCacheObject(o,q,t),q}}],c.setAppName=function(b){a.name=b},c.setDefOptions=function(b){a.defOptions=angular.extend({},a.defOptions,b)}}}(a.Services||(a.Services={}));a.Services}(SpeedShifter||(SpeedShifter={}));var SpeedShifter;!function(a){!function(){var b=angular.module("speedshifter.localStoragePromise",[]);b.provider("localStoragePromise",a.Services.LocalStorageProvider)}(a.Services||(a.Services={}));a.Services}(SpeedShifter||(SpeedShifter={}));